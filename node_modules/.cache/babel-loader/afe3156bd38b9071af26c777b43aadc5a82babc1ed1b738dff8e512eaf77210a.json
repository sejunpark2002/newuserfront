{"ast":null,"code":"var _jsxFileName = \"/Users/sejunpark/Lesson/newusermanagement/src/components/FileUpload.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Box from '@mui/material/Box';\nimport CloudUploadOutlinedIcon from '@mui/icons-material/CloudUploadOutlined';\nimport { Typography, Stack } from '@mui/material';\nimport Link from '@mui/material/Link';\nimport axios from 'axios';\n// import '../App.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FileUpload = () => {\n  _s();\n  const fileInputRef = /*#__PURE__*/React.createRef();\n  const [progress, setProgress] = useState(0);\n  const [dragOver, setDragOver] = useState(false);\n  const [currentfile, setCurrentFile] = useState('');\n  const [filesize, setFileSize] = useState(0);\n  const [filelist, setFileList] = useState([]);\n  const [uploaded, setUploaded] = useState(false);\n  const handleUpload = async () => {\n    if (uploaded) {\n      clearFileInput();\n      return;\n    }\n    try {\n      const response = await axios.post(\"http://localhost:3000/\", filelist, {\n        onUploadProgress: progressEvent => {\n          const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n          setProgress(percentCompleted);\n        }\n      });\n    } catch (error) {\n      setUploaded(false);\n    }\n  };\n\n  // Add uploaded file to an Array\n  const addFile = newFile => {\n    setFileList(prevFiles => [...prevFiles, newFile]);\n  };\n\n  // Handle file change event\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      const name = file.name.split('.')[0];\n      addFile({\n        name: name\n      });\n    }\n    console.log(filelist);\n    handleUpload();\n  };\n  // Trigger file input \n  const handleClick = () => {\n    fileInputRef.current.click();\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n    setDragOver(true);\n  };\n  const handleDragLeave = () => {\n    setDragOver(false);\n  };\n  const handleDrop = e => {\n    e.preventDefault();\n    setDragOver(false);\n    const files = e.dataTransfer.files;\n    if (files.length > 0) {\n      fileInputRef.current.files = files;\n      handleFileChange({\n        target: {\n          files\n        }\n      });\n    }\n  };\n\n  // Function to clear file state\n  const clearFileInput = () => {\n    fileInputRef.current.value = \"\";\n    setProgress(0);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      onDragOver: handleDragOver,\n      onDragLeave: handleDragLeave,\n      onDrop: handleDrop,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        height: \"50px\",\n        my: 4,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        boxShadow: 4,\n        gap: 4,\n        p: 2,\n        sx: {\n          border: '2px solid #7F56D9',\n          borderRadius: '12px'\n        },\n        children: /*#__PURE__*/_jsxDEV(Stack, {\n          direction: \"column\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          spacing: 1,\n          sx: {\n            height: '100vh'\n          },\n          children: [/*#__PURE__*/_jsxDEV(CloudUploadOutlinedIcon, {\n            sx: {\n              border: '1px solid #EAECF0',\n              borderRadius: '8px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Stack, {\n            direction: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              ref: fileInputRef,\n              className: \"hidden-input\",\n              onChange: handleFileChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              onClick: handleClick,\n              type: \"file\",\n              component: \"button\",\n              underline: \"none\",\n              sx: {\n                fontSize: '14px',\n                fontWeight: '600',\n                color: '#6941C6',\n                fontFamily: 'Inter',\n                marginBottom: '4px',\n                marginRight: '2px'\n              },\n              children: \"Click to upload\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              sx: {\n                fontSize: '13px',\n                fontWeight: 'regular',\n                color: '#475467',\n                fontFamily: 'Inter',\n                marginBottom: '4px'\n              },\n              children: \"or drag and drop\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 3\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 3\n    }, this)\n  }, void 0, false);\n};\n_s(FileUpload, \"dfg5X+BV+yjshyvmw069/Gxsm4U=\");\n_c = FileUpload;\nexport default FileUpload;\n\n// https://www.youtube.com/watch?v=edR6Az7shv8\nvar _c;\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"names":["React","useEffect","useState","Box","CloudUploadOutlinedIcon","Typography","Stack","Link","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","FileUpload","_s","fileInputRef","createRef","progress","setProgress","dragOver","setDragOver","currentfile","setCurrentFile","filesize","setFileSize","filelist","setFileList","uploaded","setUploaded","handleUpload","clearFileInput","response","post","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","error","addFile","newFile","prevFiles","handleFileChange","e","file","target","files","name","split","console","log","handleClick","current","click","handleDragOver","preventDefault","handleDragLeave","handleDrop","dataTransfer","length","value","children","onDragOver","onDragLeave","onDrop","height","my","display","alignItems","justifyContent","boxShadow","gap","p","sx","border","borderRadius","direction","spacing","fileName","_jsxFileName","lineNumber","columnNumber","type","ref","className","onChange","onClick","component","underline","fontSize","fontWeight","color","fontFamily","marginBottom","marginRight","_c","$RefreshReg$"],"sources":["/Users/sejunpark/Lesson/newusermanagement/src/components/FileUpload.jsx"],"sourcesContent":["import React,{useEffect,useState} from 'react'\nimport Box from '@mui/material/Box';\nimport CloudUploadOutlinedIcon from '@mui/icons-material/CloudUploadOutlined';\nimport { Typography,Stack } from '@mui/material';\nimport Link from '@mui/material/Link';\nimport axios from 'axios';\n// import '../App.css';\n\n\n\n\n\nconst FileUpload = () => {\n\n  const fileInputRef = React.createRef();\n  const [progress,setProgress] = useState(0);\n  const [dragOver, setDragOver] = useState(false);\n  const [currentfile, setCurrentFile] = useState('')\n  const [filesize, setFileSize] = useState(0)\n  const [filelist, setFileList] = useState([]);\n  const [uploaded, setUploaded] = useState(false)\n\n  const handleUpload = async () => {\n    if (uploaded) {\n      clearFileInput();\n      return\n    }\n    try {\n      const response = await axios.post(\n        \"http://localhost:3000/\",\n        filelist, \n        {\n          onUploadProgress: (progressEvent) => { \n            const percentCompleted = Math.round(\n              (progressEvent.loaded * 100) / progressEvent.total\n            );\n            setProgress(percentCompleted)\n          }\n        }\n      );\n      \n    }\n    catch (error) {\n      setUploaded(false)\n    }\n  }\n\n// Add uploaded file to an Array\n  const addFile = (newFile) => {\n    setFileList((prevFiles) => [...prevFiles, newFile] ) \n  }\n\n  // Handle file change event\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    if(file) {\n      const name = file.name.split('.')[0]\n      \n   \n      addFile({\n        name: name,\n      })\n    }\n    console.log(filelist)\n    handleUpload()\n  \n  }\n // Trigger file input \n  const handleClick = () => {\n    fileInputRef.current.click()\n  }\n\n  const handleDragOver = (e) => {\n    e.preventDefault();\n    setDragOver(true)\n  }\n  const handleDragLeave = () => {\n    setDragOver(false)\n  }\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    setDragOver(false)\n    const files = e.dataTransfer.files;\n    if (files.length > 0) {\n      fileInputRef.current.files = files;\n      handleFileChange({target:{files}})\n    }\n  }\n\n// Function to clear file state\nconst clearFileInput = () => {\n  fileInputRef.current.value =\"\";\n  setProgress(0);\n}\n  return (\n   <>\n  \n  <div \n    onDragOver={handleDragOver}\n    onDragLeave={handleDragLeave}\n    onDrop={handleDrop} >\n  <Box\n      height={\"50px\"}\n      my={4}\n      display=\"flex\"\n      alignItems=\"center\"\n      justifyContent={\"center\"}\n      boxShadow={4}\n      gap={4}\n      p={2}\n      sx={{ border: '2px solid #7F56D9',borderRadius:'12px' }}\n      \n    >\n     \n      <Stack  \n        direction=\"column\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        spacing={1}\n        sx={{ height: '100vh' }}\n      >\n        <CloudUploadOutlinedIcon\n          sx={{border:'1px solid #EAECF0',borderRadius:'8px'}}/>\n        <Stack direction='row'>\n\n  \n        <input\n          type=\"file\"\n          ref={fileInputRef}\n          className=\"hidden-input\"\n          onChange={handleFileChange}\n        />\n        <Link\n            onClick={handleClick}\n            type='file'\n            component=\"button\"\n            underline=\"none\"\n            sx={{fontSize:'14px',fontWeight:'600',color:'#6941C6',fontFamily:'Inter',marginBottom:'4px',marginRight:'2px'}}\n            >\n            Click to upload\n          </Link>\n      \n        <Typography sx={{fontSize:'13px',fontWeight:'regular',color:'#475467',fontFamily:'Inter',marginBottom:'4px'}}>or drag and drop</Typography>\n        \n        </Stack>\n        \n      </Stack>\n    </Box>\n  </div>\n  </>\n  )\n}\n\nexport default FileUpload\n\n// https://www.youtube.com/watch?v=edR6Az7shv8"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}