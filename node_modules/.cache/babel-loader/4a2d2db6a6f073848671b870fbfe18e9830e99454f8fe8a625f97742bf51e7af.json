{"ast":null,"code":"import React from'react';import{storage}from'../firebase.config';import{ref,uploadBytes,getDownloadURL,listAll,deleteObject}from'firebase/storage';import{createUserAction}from'../redux/userAction';import{getUserAPI}from'../api/getUserApi';import IconButton from'@mui/material/IconButton';import DeleteOutlineOutlinedIcon from'@mui/icons-material/DeleteOutlineOutlined';import{useAppDispatch,useAppSelector}from'../store';import{jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const DeleteUser=_ref=>{let{selecteduser}=_ref;const dispatch=useAppDispatch();const deleteUserAPI=async id=>{const res=await fetch(\"\".concat(process.env.REACT_APP_API_ADDRESS_DEV,\"?id=\").concat(id),{method:'DELETE',headers:{'Content-Type':'application/json'}});return await res.json();};const deleteImageInStorage=async imgpath=>{const imageRef=ref(storage,imgpath);const result=await deleteObject(imageRef);console.log(result);};const deleteUser=async _ref2=>{let{id,imagePath}=_ref2;await deleteImageInStorage(imagePath);const res=await deleteUserAPI(id);const result=await getUserAPI();dispatch(createUserAction(result));};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>deleteUser(selecteduser),sx:{padding:\"0\"},children:/*#__PURE__*/_jsx(DeleteOutlineOutlinedIcon,{})})});};export default DeleteUser;","map":{"version":3,"names":["React","storage","ref","uploadBytes","getDownloadURL","listAll","deleteObject","createUserAction","getUserAPI","IconButton","DeleteOutlineOutlinedIcon","useAppDispatch","useAppSelector","jsx","_jsx","Fragment","_Fragment","DeleteUser","_ref","selecteduser","dispatch","deleteUserAPI","id","res","fetch","concat","process","env","REACT_APP_API_ADDRESS_DEV","method","headers","json","deleteImageInStorage","imgpath","imageRef","result","console","log","deleteUser","_ref2","imagePath","children","onClick","sx","padding"],"sources":["/Users/sejunpark/Lesson/newusermanagement/src/components/DeleteUser.jsx"],"sourcesContent":["import React from 'react'\nimport { storage } from '../firebase.config'\nimport { ref, uploadBytes, getDownloadURL, listAll, deleteObject } from 'firebase/storage'\nimport {createUserAction} from '../redux/userAction'\nimport { getUserAPI } from '../api/getUserApi';\nimport IconButton from '@mui/material/IconButton';\nimport DeleteOutlineOutlinedIcon from '@mui/icons-material/DeleteOutlineOutlined';\nimport {useAppDispatch,useAppSelector} from '../store'\n\nconst DeleteUser = ({selecteduser}) => {\n  const dispatch = useAppDispatch();\n  \n  const deleteUserAPI = async (id) => {\n    const res= await fetch ( `${process.env.REACT_APP_API_ADDRESS_DEV}?id=${id}`, {\n     method:'DELETE',\n     headers:  {\n       'Content-Type': 'application/json',\n     }\n    })\n    return await res.json();\n   }\n   \n   const deleteImageInStorage = async (imgpath)=> {\n     const imageRef = ref(storage, imgpath)\n     const result = await deleteObject(imageRef)\n     console.log(result)\n   }\n   \n   const deleteUser = async ({id, imagePath}) => {\n   \n     await deleteImageInStorage(imagePath);\n   \n     const res = await deleteUserAPI(id);\n     const result = await getUserAPI();\n     dispatch(createUserAction(result))\n    }\n\n  return (\n    <>\n       <IconButton onClick={()=>deleteUser(selecteduser)} sx={{padding:\"0\"}}><DeleteOutlineOutlinedIcon/></IconButton>\n    </>\n  )\n}\n\nexport default DeleteUser"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,oBAAoB,CAC5C,OAASC,GAAG,CAAEC,WAAW,CAAEC,cAAc,CAAEC,OAAO,CAAEC,YAAY,KAAQ,kBAAkB,CAC1F,OAAQC,gBAAgB,KAAO,qBAAqB,CACpD,OAASC,UAAU,KAAQ,mBAAmB,CAC9C,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,CAAAC,yBAAyB,KAAM,2CAA2C,CACjF,OAAQC,cAAc,CAACC,cAAc,KAAO,UAAU,QAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEtD,KAAM,CAAAC,UAAU,CAAGC,IAAA,EAAoB,IAAnB,CAACC,YAAY,CAAC,CAAAD,IAAA,CAChC,KAAM,CAAAE,QAAQ,CAAGT,cAAc,CAAC,CAAC,CAEjC,KAAM,CAAAU,aAAa,CAAG,KAAO,CAAAC,EAAE,EAAK,CAClC,KAAM,CAAAC,GAAG,CAAE,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAMC,OAAO,CAACC,GAAG,CAACC,yBAAyB,SAAAH,MAAA,CAAOH,EAAE,EAAI,CAC7EO,MAAM,CAAC,QAAQ,CACfC,OAAO,CAAG,CACR,cAAc,CAAE,kBAClB,CACD,CAAC,CAAC,CACF,MAAO,MAAM,CAAAP,GAAG,CAACQ,IAAI,CAAC,CAAC,CACxB,CAAC,CAED,KAAM,CAAAC,oBAAoB,CAAG,KAAO,CAAAC,OAAO,EAAI,CAC7C,KAAM,CAAAC,QAAQ,CAAGhC,GAAG,CAACD,OAAO,CAAEgC,OAAO,CAAC,CACtC,KAAM,CAAAE,MAAM,CAAG,KAAM,CAAA7B,YAAY,CAAC4B,QAAQ,CAAC,CAC3CE,OAAO,CAACC,GAAG,CAACF,MAAM,CAAC,CACrB,CAAC,CAED,KAAM,CAAAG,UAAU,CAAG,MAAAC,KAAA,EAA2B,IAApB,CAACjB,EAAE,CAAEkB,SAAS,CAAC,CAAAD,KAAA,CAEvC,KAAM,CAAAP,oBAAoB,CAACQ,SAAS,CAAC,CAErC,KAAM,CAAAjB,GAAG,CAAG,KAAM,CAAAF,aAAa,CAACC,EAAE,CAAC,CACnC,KAAM,CAAAa,MAAM,CAAG,KAAM,CAAA3B,UAAU,CAAC,CAAC,CACjCY,QAAQ,CAACb,gBAAgB,CAAC4B,MAAM,CAAC,CAAC,CACnC,CAAC,CAEH,mBACErB,IAAA,CAAAE,SAAA,EAAAyB,QAAA,cACG3B,IAAA,CAACL,UAAU,EAACiC,OAAO,CAAEA,CAAA,GAAIJ,UAAU,CAACnB,YAAY,CAAE,CAACwB,EAAE,CAAE,CAACC,OAAO,CAAC,GAAG,CAAE,CAAAH,QAAA,cAAC3B,IAAA,CAACJ,yBAAyB,GAAC,CAAC,CAAY,CAAC,CAChH,CAAC,CAEP,CAAC,CAED,cAAe,CAAAO,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}