{"ast":null,"code":"import React from'react';import{storage}from'../firebase.config';import{ref,uploadBytes,getDownloadURL,listAll,deleteObject}from'firebase/storage';import{useAppDispatch,useAppSelector}from'../store/index';import{createUserAction}from'../redux/userAction';import{getUserAPI}from'../api/getUserApi';const deleteUserAPI=async id=>{const res=await fetch(\"\".concat(process.env.REACT_APP_API_ADDRESS_DEV,\"?id=\").concat(id),{method:'DELETE',headers:{'Content-Type':'application/json'}});return await res.json();};const deleteImageInStorage=async imgpath=>{const imageRef=ref(storage,imgpath);const result=await deleteObject(imageRef);console.log(result);};const deleteUser=async(_ref,dispatch)=>{let{id,imagePath}=_ref;await deleteImageInStorage(imagePath);const res=await deleteUserAPI(id);const result=await getUserAPI();dispatch(createUserAction(result));};export default deleteUser;","map":{"version":3,"names":["React","storage","ref","uploadBytes","getDownloadURL","listAll","deleteObject","useAppDispatch","useAppSelector","createUserAction","getUserAPI","deleteUserAPI","id","res","fetch","concat","process","env","REACT_APP_API_ADDRESS_DEV","method","headers","json","deleteImageInStorage","imgpath","imageRef","result","console","log","deleteUser","_ref","dispatch","imagePath"],"sources":["/Users/sejunpark/Lesson/newusermanagement/src/components/DeleteUser.js"],"sourcesContent":["import React from 'react'\nimport { storage } from '../firebase.config'\nimport { ref, uploadBytes, getDownloadURL, listAll, deleteObject } from 'firebase/storage'\nimport {useAppDispatch,useAppSelector} from '../store/index'\nimport {createUserAction} from '../redux/userAction'\nimport { getUserAPI } from '../api/getUserApi';\n\n\n\nconst deleteUserAPI = async (id) => {\n  const res= await fetch ( `${process.env.REACT_APP_API_ADDRESS_DEV}?id=${id}`, {\n   method:'DELETE',\n   headers:  {\n     'Content-Type': 'application/json',\n   }\n  })\n  return await res.json();\n }\n \n const deleteImageInStorage = async (imgpath)=> {\n   const imageRef = ref(storage, imgpath)\n   const result = await deleteObject(imageRef)\n   console.log(result)\n }\n \n const deleteUser = async ({id, imagePath},dispatch) => {\n \n   await deleteImageInStorage(imagePath);\n \n   const res = await deleteUserAPI(id);\n   const result = await getUserAPI();\n   dispatch(createUserAction(result))\n \n \n  }\n \n export default deleteUser\n\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,oBAAoB,CAC5C,OAASC,GAAG,CAAEC,WAAW,CAAEC,cAAc,CAAEC,OAAO,CAAEC,YAAY,KAAQ,kBAAkB,CAC1F,OAAQC,cAAc,CAACC,cAAc,KAAO,gBAAgB,CAC5D,OAAQC,gBAAgB,KAAO,qBAAqB,CACpD,OAASC,UAAU,KAAQ,mBAAmB,CAI9C,KAAM,CAAAC,aAAa,CAAG,KAAO,CAAAC,EAAE,EAAK,CAClC,KAAM,CAAAC,GAAG,CAAE,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAMC,OAAO,CAACC,GAAG,CAACC,yBAAyB,SAAAH,MAAA,CAAOH,EAAE,EAAI,CAC7EO,MAAM,CAAC,QAAQ,CACfC,OAAO,CAAG,CACR,cAAc,CAAE,kBAClB,CACD,CAAC,CAAC,CACF,MAAO,MAAM,CAAAP,GAAG,CAACQ,IAAI,CAAC,CAAC,CACxB,CAAC,CAED,KAAM,CAAAC,oBAAoB,CAAG,KAAO,CAAAC,OAAO,EAAI,CAC7C,KAAM,CAAAC,QAAQ,CAAGtB,GAAG,CAACD,OAAO,CAAEsB,OAAO,CAAC,CACtC,KAAM,CAAAE,MAAM,CAAG,KAAM,CAAAnB,YAAY,CAACkB,QAAQ,CAAC,CAC3CE,OAAO,CAACC,GAAG,CAACF,MAAM,CAAC,CACrB,CAAC,CAED,KAAM,CAAAG,UAAU,CAAG,KAAAA,CAAAC,IAAA,CAAuBC,QAAQ,GAAK,IAA7B,CAAClB,EAAE,CAAEmB,SAAS,CAAC,CAAAF,IAAA,CAEvC,KAAM,CAAAP,oBAAoB,CAACS,SAAS,CAAC,CAErC,KAAM,CAAAlB,GAAG,CAAG,KAAM,CAAAF,aAAa,CAACC,EAAE,CAAC,CACnC,KAAM,CAAAa,MAAM,CAAG,KAAM,CAAAf,UAAU,CAAC,CAAC,CACjCoB,QAAQ,CAACrB,gBAAgB,CAACgB,MAAM,CAAC,CAAC,CAGnC,CAAC,CAEF,cAAe,CAAAG,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}