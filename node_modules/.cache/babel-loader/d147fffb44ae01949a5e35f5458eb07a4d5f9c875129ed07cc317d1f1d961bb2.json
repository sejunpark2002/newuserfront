{"ast":null,"code":"import React from'react';import{useState}from'react';import Button from'@mui/material/Button';import{addUserAPI}from'../api/addUserApi';import{nanoid}from'nanoid';import{Stack}from'@mui/system';import{storage}from'../firebase.config';import{Typography,TextField}from'@mui/material';import{ref,uploadBytes,getDownloadURL,listAll,deleteObject}from'firebase/storage';import{useAppDispatch,useAppSelector}from'../store';import{createUserAction}from'../redux/userAction';import{getUserAPI}from'../api/getUserApi';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AddUser=_ref=>{let{onClose}=_ref;const dispatch=useAppDispatch();const[userInfo,setUserInfo]=useState({name:'',email:'',phone:''});const[image,setImage]=useState(null);const changeUserInfo=e=>{const{name,value}=e.target;setUserInfo({...userInfo,[name]:value});};const handleUploadImage=e=>{const{files}=e.target;if(files!==null&&files!==void 0&&files.length){setImage(files[0]);}};const validateUserInput=async()=>{const{name,email,phone}=userInfo;if(!name||!email||!phone){alert('Please Type User Info');return;}if(!image){alert('please upload file');return;}try{const currentTime=Date.now();const imgPath=\"images/\".concat(image.name,\"_\").concat(currentTime);const imageRef=ref(storage,imgPath);await uploadBytes(imageRef,image);const tempimageUrl=await getDownloadURL(imageRef);const newUser={id:nanoid(),name:userInfo.name,phone:userInfo.phone,email:userInfo.email,imageUrl:tempimageUrl,imagePath:imgPath,timeCreated:currentTime};await addUserAPI(newUser);onClose();const result=await getUserAPI();dispatch(createUserAction(result));// setUserList({...userList, user:result, loading:false})\n}catch(err){console.log(err);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Stack,{children:[/*#__PURE__*/_jsx(Typography,{sx:{color:'#344054',fontSize:'13px'},mb:'5px',children:\"Name\"}),/*#__PURE__*/_jsx(TextField,{type:\"text\",name:\"name\",value:userInfo.name,onChange:changeUserInfo,size:\"small\",sx:{width:'100%',height:'34px',mb:'20px'}}),/*#__PURE__*/_jsx(Typography,{sx:{color:'#344054',fontSize:'13px'},mb:'5px',children:\"Email\"}),/*#__PURE__*/_jsx(TextField,{type:\"text\",name:\"email\",value:userInfo.email,onChange:changeUserInfo,size:\"small\",sx:{width:'100%',height:'34px',mb:'20px'}}),/*#__PURE__*/_jsx(Typography,{sx:{color:'#344054',fontSize:'13px'},mb:'5px',children:\"Phone\"}),/*#__PURE__*/_jsx(TextField,{type:\"text\",name:\"phone\",value:userInfo.phone,onChange:changeUserInfo,size:\"small\",sx:{width:'100%',height:'34px',mb:'20px'}}),/*#__PURE__*/_jsx(Typography,{sx:{color:'#344054',fontSize:'13px'},mb:'5px',children:\"Profile Picture\"}),/*#__PURE__*/_jsx(TextField,{type:\"file\",onChange:handleUploadImage,size:\"small\",sx:{width:'100%',height:'34px',mb:'20px'}}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",sx:{bgcolor:'#FFC401','&:hover':{borderColor:'#436AE9',// Keep the same color on hover\nbackgroundColor:'#E6B337',color:'#FFFFFF',borderWidth:'2px'// Ensure the border width stays the same on hover\n}},onClick:()=>{validateUserInput();},children:\"Add User\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",sx:{borderColor:'#FFC401',color:'#FFC401','&:hover':{borderColor:'#FFC401',// Keep the same color on hover\nbackgroundColor:'#F0F0F0'// Ensure the border width stays the same on hover\n}},onClick:onClose,children:\"Cancel\"})]})]})});};export default AddUser;","map":{"version":3,"names":["React","useState","Button","addUserAPI","nanoid","Stack","storage","Typography","TextField","ref","uploadBytes","getDownloadURL","listAll","deleteObject","useAppDispatch","useAppSelector","createUserAction","getUserAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AddUser","_ref","onClose","dispatch","userInfo","setUserInfo","name","email","phone","image","setImage","changeUserInfo","e","value","target","handleUploadImage","files","length","validateUserInput","alert","currentTime","Date","now","imgPath","concat","imageRef","tempimageUrl","newUser","id","imageUrl","imagePath","timeCreated","result","err","console","log","children","sx","color","fontSize","mb","type","onChange","size","width","height","direction","spacing","variant","bgcolor","borderColor","backgroundColor","borderWidth","onClick"],"sources":["/Users/sejunpark/Lesson/newusermanagement/src/components/AddUser.jsx"],"sourcesContent":["import React from 'react'\nimport {useState} from 'react'\nimport Button from '@mui/material/Button';\nimport {addUserAPI} from '../api/addUserApi'\nimport { nanoid } from 'nanoid';\nimport { Stack } from '@mui/system';\nimport { storage } from '../firebase.config'\nimport { Typography,TextField } from '@mui/material';\nimport { ref, uploadBytes, getDownloadURL, listAll, deleteObject } from 'firebase/storage'\nimport {useAppDispatch,useAppSelector} from '../store';\nimport {createUserAction} from '../redux/userAction'\nimport { getUserAPI } from '../api/getUserApi';\n\nconst AddUser = ({onClose}) => {\n  const dispatch = useAppDispatch()\n\n  const [userInfo,setUserInfo] = useState({\n    name:'',\n    email:'',\n    phone:''\n  })\n\n  const [image, setImage] = useState(null)\n\n  const changeUserInfo = (e) => { \n    const {name,value} = e.target\n    setUserInfo({...userInfo,[name]:value})\n    }\n\n  const handleUploadImage = (e) => {\n    const {files} = e.target;\n    if(files?.length) {\n      setImage(files[0])\n    }\n  }\n\n \n\n\n  const validateUserInput = async () => {\n    const {name,email,phone} = userInfo\n    if(!name || !email || !phone ) {\n      alert('Please Type User Info')\n      return\n    } \n    if(!image) {\n      alert('please upload file');\n      return;\n    }\n    try {\n      const currentTime = Date.now();\n      const imgPath = `images/${image.name}_${currentTime}`\n      const imageRef = ref(storage,imgPath);\n      await uploadBytes(imageRef,image)\n      const tempimageUrl = await getDownloadURL(imageRef)\n\n      const newUser = {\n        id: nanoid(),\n        name:userInfo.name,\n        phone:userInfo.phone,\n        email:userInfo.email,\n        imageUrl:tempimageUrl,\n        imagePath: imgPath,\n        timeCreated: currentTime\n       };\n\n      await addUserAPI(newUser);\n      onClose();\n      const result = await getUserAPI();\n      dispatch(createUserAction(result))\n      // setUserList({...userList, user:result, loading:false})\n\n    } catch(err) {\n      console.log(err)\n    }\n   \n  }\n\n  \n  return (\n    <>\n      <Stack>\n        <Typography sx={{color:'#344054',fontSize:'13px'}} mb={'5px'}>Name</Typography>\n        <TextField type='text' name=\"name\" value={userInfo.name} onChange={changeUserInfo} size='small' sx = {{width:'100%',height:'34px',mb:'20px'}}/>\n        <Typography sx={{color:'#344054',fontSize:'13px'}} mb={'5px'}>Email</Typography>\n        <TextField type='text' name=\"email\" value={userInfo.email} onChange={changeUserInfo} size='small' sx = {{width:'100%',height:'34px',mb:'20px'}}/>\n        <Typography  sx={{color:'#344054',fontSize:'13px'}} mb={'5px'}>Phone</Typography>\n        <TextField type='text' name=\"phone\" value={userInfo.phone} onChange={changeUserInfo} size='small' sx = {{width:'100%',height:'34px',mb:'20px'}}/>\n        <Typography  sx={{color:'#344054',fontSize:'13px'}} mb={'5px'}>Profile Picture</Typography>\n        <TextField type='file'  onChange={handleUploadImage} size='small' sx = {{width:'100%',height:'34px',mb:'20px'}}/>\n        <Stack direction=\"row\" spacing={2}>\n          <Button variant=\"contained\" \n                  sx={{bgcolor:'#FFC401',\n                    '&:hover': {\n                        borderColor: '#436AE9', // Keep the same color on hover\n                        backgroundColor: '#E6B337',\n                        color:'#FFFFFF',\n                        borderWidth: '2px', // Ensure the border width stays the same on hover\n                         },\n                  }} \n                  onClick={()=>{validateUserInput()}}>\n                  Add User</Button>\n          <Button variant=\"outlined\"\n                  sx={{borderColor:'#FFC401',\n                       color:'#FFC401',\n                       '&:hover': {\n                        borderColor: '#FFC401', // Keep the same color on hover\n                        backgroundColor: '#F0F0F0',\n                     // Ensure the border width stays the same on hover\n                         } \n                  }}\n                   onClick={onClose}>Cancel</Button>\n\n        </Stack>\n     \n       \n      </Stack>\n     \n    </>\n  )\n}\n\nexport default AddUser"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}